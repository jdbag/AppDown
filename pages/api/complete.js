export default async function handler(req,res){if(req.method==="POST"){const{paymentId,txid}=req.body;try{const r=await fetch(`https://api.minepi.com/v2/payments/${paymentId}/complete`,{method:"POST",headers:{"Authorization":`Key ${process.env.PI_API_KEY}`,"Content-Type":"application/x-www-form-urlencoded"},body:`txid=${txid}`});const d=await r.json();res.status(200).json({message:"Payment completed",piResponse:d});}catch(e){res.status(500).json({error:"Failed to complete payment"});} }else{res.status(405).json({error:"Method not allowed"});} }
